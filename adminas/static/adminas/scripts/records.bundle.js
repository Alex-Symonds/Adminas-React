(()=>{var e={371:(e,t,n)=>{"use strict";n.d(t,{B3:()=>y,bb:()=>a,gr:()=>u,nm:()=>m,pZ:()=>p,rV:()=>L,xs:()=>d});var r=n(60);const o="modal",l="modal_closeButton",c="closeButton",i="modalWrapper",s="modal_heading",a="modal_contents";function d(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const l=function(){let e=document.createElement("div");return e.classList.add(i),e.classList.add(r.XL),e}();""!==t&&null!=t&&(l.className=`${l.className} ${t}`);const s=function(){let e=document.createElement("dialog");return e.classList.add(o),e}(),a=(0,r.Qp)();return a.classList.add(`${o}_${c}`),a.addEventListener("click",(()=>{null!==n&&n(),f({dialog:s,wrapper:l})})),s.append(a),s.append(e),l.append(s),l}function u(e){let t;return t="number"!=typeof e||e>6||e<1?document.createElement("h2"):document.createElement(`h${e}`),t.classList.add(s),t}function p(e){e.classList.remove(r.XL),e.querySelector(`.${o}`).show()}function f(e){let{dialog:t,wrapper:n}=e;null==n||n?.classList.contains(r.XL)||n?.classList.add(r.XL),null!=t&&t?.close()}function m(){return document.querySelectorAll(`.${l}`)}function y(e){return e.querySelector(`.${i}`)}function L(e){const t=e.closest(`.${o}`);null===t||e.addEventListener("click",(()=>{var e;f({dialog:t,wrapper:(e=t,e.closest(`.${i}`))})}))}},60:(e,t,n)=>{"use strict";n.d(t,{Fl:()=>a,NY:()=>m,O9:()=>L,Qp:()=>y,XL:()=>r,YG:()=>s,au:()=>u,ml:()=>f,oq:()=>d});const r="hide",o="http_code",l="location",c=new Set([200,201,204]),i=-1;function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n={method:e,headers:(r=function(e){let t=null;if(document.cookie&&""!==document.cookie){const n=document.cookie.split(";");for(let r=0;r<n.length;r++){const o=n[r].trim();if(o.substring(0,10)===e+"="){t=decodeURIComponent(o.substring(10));break}}}return t}("csrftoken"),o=new Headers,o.append("X-CSRFToken",r),o),credentials:"include"};var r,o;return null!=t&&(n.body=JSON.stringify(t)),n}async function a(e,t){let n=await fetch(e,t).catch((e=>{console.log("Error: ",e)}));return await d(n)}async function d(e){const t=e.headers.get("content-type");if(t&&-1!==t.indexOf("application/json"))var n=await e.json();else n={};return n[o]=e.status,n[l]=e.headers.get("Location"),n}function u(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=p(e);return n!==i&&(null===t?c.has(n):n===t)}function p(e){return"object"!=typeof e?i:o in e?"string"==typeof e[o]?parseInt(e[o]):e[o]:i}function f(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n="error";if("string"==typeof e)return e;if("object"==typeof e){if(null!==t){let n=!0,r=p(e);if(r!==i&&(n=!function(e){return!!c.has(e)||(401==e||403==e||409==e)}(r)),n)return t}return function(e){if(u(e))return"Page refresh recommended.";switch(p(e)){case 400:return"Invalid inputs.";case 401:return"You must be logged in.";case 403:return r(e)?e[n]:"Request was forbidden by the server.";case 404:return"Requested information was not found.";case 409:return r(e)?e[n]:"Request clashed with information on server. (The server won.)";case 500:return"A server error has occurred.";default:return"Error: something went wrong."}}(e)}return null!==t?t:"Error: something went wrong.";function r(e){return"object"==typeof e&&n in e}}function m(e,t){let n=document.createElement("label");return n.innerHTML=e,n.for=t,n}function y(){let e=document.createElement("button");e.classList.add("close");let t=document.createElement("span");return t.innerHTML="close",e.append(t),e}function L(){let e=document.createElement("button");return e.classList.add("button-primary"),e.innerHTML="submit",e}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var l=t[r]={exports:{}};return e[r](l,l.exports,n),l.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=n(371),t=n(60);const r="id_filter_",o=[{title:"Job Reference",input_type:"single-text",id:"ref_job"},{title:"PO Reference",input_type:"single-text",id:"ref_po"},{title:"Quote Reference",input_type:"single-text",id:"ref_quote"},{title:"Customer",input_type:"select",id:"customer"},{title:"Agent",input_type:"select",id:"agent"},{title:"Date of Entry",input_type:"range-date",id:"date"}];function l(e){const n=c(),o=(0,t.NY)(e.title,r+e.id);return o.classList.add("formy_label"),n.append(o),n}function c(){const e=document.createElement("div");return e.classList.add("formy_labelFieldContainer"),e}function i(e){let t=l(e),n=document.createElement("input");return n.type="text",n.id=r+e.id,t.append(n),t}function s(e){let n=document.createElement("fieldset");n.classList.add("recordsFilter_fieldset");let o=document.createElement("legend");o.classList.add("formy_label"),o.innerHTML=e.title,n.append(o);const l=document.createElement("div");l.classList.add("recordsFilter_fieldsetContainer");const i=c();let s=`${r}s${e.id}`;i.append((0,t.NY)("From",s)),i.append(a(s)),l.append(i);const d=c();let u=`${r}e${e.id}`;return d.append((0,t.NY)("To",u)),d.append(a(u)),l.append(d),n.append(l),n}function a(e){let t=document.createElement("input");return t.type="date",t.id=e,t}async function d(e){let n=l(e),o=document.createElement("select");o.id=r+e.id;let c=document.createElement("option");c.selected=!0,c.value="0",c.innerHTML="---------",o.append(c);let i=await async function(e){let n=await fetch(`${URL_SELECT_OPTIONS}?type=select_options_list&name=${e}s`).catch((e=>{console.log("Error: ",e)}));return await(0,t.oq)(n)}(e.id);if((0,t.au)(i,200)){let e=i.opt_list;for(let t=0;t<e.length;t++){var s=document.createElement("option");s.value=e[t].id,s.innerHTML=e[t].display_str,o.append(s)}n.append(o)}else{var a=create_generic_ele_dismissable_error(i,"Error: failed to load dropdown.");n.append(a)}return n}function u(e,t){return""!==t?f(e,t):""}function p(e,t){let n="",r=document.getElementById(e+"s"+t);return null!==r&&(n+=u("s"+t,r.value)),r=document.getElementById(e+"e"+t),null!==r&&(""!==n&&(n+="&"),n+=u("e"+t,r.value)),n}function f(e,t){return`${e}=${t}`}document.addEventListener("DOMContentLoaded",(()=>{document.getElementById("id_filter_records").addEventListener("click",(()=>{!async function(){const n=document.querySelector(".recordsFilterWrapper"),l=await async function(){let n=document.createElement("form");n.id="id_filter_options",n.append(function(){const t=(0,e.gr)(4);return t.innerHTML="Filter Options",t}());const l=document.createElement("div");return l.classList.add(e.bb),l.classList.add("recordsFilter_formContents"),l.classList.add("formy"),l.append(await async function(){let e=document.createElement("div");e.classList.add("formy_inputsContainer");for(let t=0;t<o.length;t++)"single-text"===o[t].input_type?e.append(i(o[t])):"select"===o[t].input_type?e.append(await d(o[t])):"range-date"===o[t].input_type&&e.append(s(o[t]));return e}()),l.append(function(){document.createElement("div").classList.add("formControls");const e=(0,t.O9)();return e.classList.add("button-primary"),e.classList.add("formControls_submit"),e.classList.add("recordsFilter_submit"),e.type="button",e.innerHTML="apply filter",e.addEventListener("click",(()=>{!function(){let e=function(){let e=function(){let e=[];for(let i=0;i<o.length;i++){var t="",n=document.getElementById(r+o[i].id);null!==n?"single-text"===o[i].input_type?t=u(o[i].id,n.value):"select"===o[i].input_type&&(l=o[i].id,t="0"!==(c=n.value)?f(l,c):""):"range-date"===o[i].input_type&&(t=p(r,o[i].id)),""!==t&&e.push(t)}var l,c;return e}();if(e.length>0){let t=`?${e[0]}`;for(let n=1;n<e.length;n++)t+=`&${e[n]}`;return t}return""}();window.location.href=`${URL_RECORDS}${e}`}()})),e}()),n.append(l),n}(),c=(0,e.xs)(l);n.append(c),(0,e.pZ)(c)}()}))}))})(),(()=>{"use strict";var e=n(371);document.addEventListener("DOMContentLoaded",(()=>{(function(){const t=document.querySelectorAll(".recordsTable_productsButton");null!==t&&t.forEach((t=>{t.addEventListener("click",(()=>{const n=(0,e.B3)(t.parentNode);(0,e.pZ)(n)}))}))})(),(0,e.nm)().forEach((t=>{(0,e.rV)(t)}))}))})(),document.addEventListener("DOMContentLoaded",(()=>{!function(){const e="scrollingShadowsWrapper",t="scrollingShadowsWrapper_scrollable",n="--opacityStart",r="--opacityEnd";let o=!1;function l(){const e=function(){const e=a();return null!==e&&e.scrollWidth>e.clientWidth}();e&&!o?function(){const e=a();null!==e&&(i(),e.addEventListener("scroll",(()=>{i()})),o=!0)}():!e&&o&&function(){c(0,0);const e=a();null!==e&&e.removeEventListener("scroll",(()=>{i()})),o=!1}()}function c(e,t){const o=s();null!==o&&(o.style.setProperty(n,e),o.style.setProperty(r,t))}function i(){const e=a(),t=function(e){const t=s();return null!==e&&null!==t?e.scrollWidth-t.offsetWidth:0}(e);if(0!==t){const n=e.scrollLeft/t;c(n,1-n)}}function s(){return document.querySelector(`.${e}`)}function a(){return document.querySelector(`.${t}`)}l(),window.addEventListener("resize",(()=>{l()}))}()})),(()=>{"use strict";var e=n(60);!function(){const t="todo-list-add";document.querySelectorAll("."+t).forEach((n=>{n.addEventListener("click",(()=>{!async function(n){let r=(0,e.YG)("PUT",{job_id:n.dataset.job_id}),o=await(0,e.Fl)(`${URL_TODO_MANAGEMENT}`,r);(0,e.au)(o,204)?function(e){const n="recordsTable_todoButton-on";e.classList.contains(t)&&(e.disabled=!0,e.classList.remove("recordsTable_todoButton-off"),e.classList.contains(n)||e.classList.add(n),e.querySelector(".recordsTable_todoButtonSpan").textContent="on todo list")}(n):alert((0,e.ml)(o))}(n)}))}))}()})()})();