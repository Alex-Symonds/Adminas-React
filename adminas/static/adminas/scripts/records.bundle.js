(()=>{var e={371:(e,t,n)=>{"use strict";n.d(t,{B3:()=>m,gr:()=>d,nm:()=>f,pZ:()=>u,rV:()=>_,xs:()=>a});var r=n(60);const o="modal",c="modal_closeButton",l="closeButton",i="modalWrapper",s="modal_heading";function a(e){const t=function(){let e=document.createElement("div");return e.classList.add(i),e.classList.add(r.XL),e}(),n=function(){let e=document.createElement("dialog");return e.classList.add(o),e}(),c=(0,r.Qp)();return c.classList.add(`${o}_${l}`),c.addEventListener("click",(()=>{p(n,t)})),n.append(c),n.append(e),t.append(n),t}function d(e){let t;return t="number"!=typeof e||e>6||e<1?document.createElement("h2"):document.createElement(`h${e}`),ele.classList.add(s),ele}function u(e){e.classList.remove(r.XL),e.querySelector(`.${o}`).show()}function p(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=null===t?e.closest(`.${i}`):t;n.classList.contains(r.XL)||n.classList.add(r.XL),e.close()}function f(){return document.querySelectorAll(`.${c}`)}function m(e){return e.querySelector(`.${i}`)}function _(e){const t=e.closest(`.${o}`);null===t||e.addEventListener("click",(()=>{p(t,null)}))}},60:(e,t,n)=>{"use strict";n.d(t,{Fl:()=>a,Qp:()=>f,XL:()=>r,YG:()=>s,au:()=>d,ml:()=>p});const r="hide",o="http_code",c="location",l=new Set([200,201,204]),i=-1;function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n={method:e,headers:(r=function(e){let t=null;if(document.cookie&&""!==document.cookie){const n=document.cookie.split(";");for(let r=0;r<n.length;r++){const o=n[r].trim();if(o.substring(0,10)===e+"="){t=decodeURIComponent(o.substring(10));break}}}return t}("csrftoken"),o=new Headers,o.append("X-CSRFToken",r),o),credentials:"include"};var r,o;return null!=t&&(n.body=JSON.stringify(t)),n}async function a(e,t){let n=await fetch(e,t).catch((e=>{console.log("Error: ",e)}));return await async function(e){const t=e.headers.get("content-type");if(t&&-1!==t.indexOf("application/json"))var n=await e.json();else n={};return n[o]=e.status,n[c]=e.headers.get("Location"),n}(n)}function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=u(e);return n!==i&&(null===t?l.has(n):n===t)}function u(e){return"object"!=typeof e?i:o in e?"string"==typeof e[o]?parseInt(e[o]):e[o]:i}function p(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n="error";if("string"==typeof e)return e;if("object"==typeof e){if(null!==t){let n=!0,r=u(e);if(r!==i&&(n=!function(e){return!!l.has(e)||(401==e||403==e||409==e)}(r)),n)return t}return function(e){if(d(e))return"Page refresh recommended.";switch(u(e)){case 400:return"Invalid inputs.";case 401:return"You must be logged in.";case 403:return r(e)?e[n]:"Request was forbidden by the server.";case 404:return"Requested information was not found.";case 409:return r(e)?e[n]:"Request clashed with information on server. (The server won.)";case 500:return"A server error has occurred.";default:return"Error: something went wrong."}}(e)}return null!==t?t:"Error: something went wrong.";function r(e){return"object"==typeof e&&n in e}}function f(){let e=document.createElement("button");e.classList.add("close");let t=document.createElement("span");return t.innerHTML="close",e.append(t),e}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var c=t[r]={exports:{}};return e[r](c,c.exports,n),c.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=n(371);const t="id_filter_",r=[{title:"Job Reference",input_type:"single-text",id:"ref_job"},{title:"PO Reference",input_type:"single-text",id:"ref_po"},{title:"Quote Reference",input_type:"single-text",id:"ref_quote"},{title:"Customer",input_type:"select",id:"customer"},{title:"Agent",input_type:"select",id:"agent"},{title:"Date of Entry",input_type:"range-date",id:"date"}];function o(e){const n=c(),r=create_generic_ele_label(e.title,t+e.id);return r.classList.add("formy_label"),n.append(r),n}function c(){const e=document.createElement("div");return e.classList.add("formy_labelFieldContainer"),e}function l(e){let n=o(e),r=document.createElement("input");return r.type="text",r.id=t+e.id,n.append(r),n}function i(e){let n=document.createElement("fieldset");n.classList.add("recordsFilter_fieldset");let r=document.createElement("legend");r.classList.add("formy_label"),r.innerHTML=e.title,n.append(r);const o=document.createElement("div");o.classList.add("recordsFilter_fieldsetContainer");const l=c();let i=`${t}s${e.id}`;l.append(create_generic_ele_label("From",i)),l.append(s(i)),o.append(l);const a=c();let d=`${t}e${e.id}`;return a.append(create_generic_ele_label("To",d)),a.append(s(d)),o.append(a),n.append(o),n}function s(e){let t=document.createElement("input");return t.type="date",t.id=e,t}async function a(e){let n=o(e),r=document.createElement("select");r.id=t+e.id;let c=document.createElement("option");c.selected=!0,c.value="0",c.innerHTML="---------",r.append(c);let l=await async function(e){let t=await fetch(`${URL_SELECT_OPTIONS}?type=select_options_list&name=${e}s`).catch((e=>{console.log("Error: ",e)}));return await get_json_with_status(t)}(e.id);if(status_is_good(l,200)){let e=l.opt_list;for(let t=0;t<e.length;t++){var i=document.createElement("option");i.value=e[t].id,i.innerHTML=e[t].display_str,r.append(i)}n.append(r)}else{var s=create_generic_ele_dismissable_error(l,"Error: failed to load dropdown.");n.append(s)}return n}function d(e,t){return""!==t?p(e,t):""}function u(e,t){let n="",r=document.getElementById(e+"s"+t);return null!==r&&(n+=d("s"+t,r.value)),r=document.getElementById(e+"e"+t),null!==r&&(""!==n&&(n+="&"),n+=d("e"+t,r.value)),n}function p(e,t){return`${e}=${t}`}document.addEventListener("DOMContentLoaded",(()=>{document.getElementById("id_filter_records").addEventListener("click",(()=>{!async function(){const n=document.querySelector(".recordsFilterWrapper"),o=await async function(){let n=document.createElement("form");n.id="id_filter_options",n.append(function(){const t=(0,e.gr)(4);return t.innerHTML="Filter Options",t}());const o=document.createElement("div");return o.classList.add(CSS_MODAL_CONTENTS),o.classList.add("recordsFilter_formContents"),o.classList.add("formy"),o.append(await async function(){let e=document.createElement("div");e.classList.add("formy_inputsContainer");for(let t=0;t<r.length;t++)"single-text"===r[t].input_type?e.append(l(r[t])):"select"===r[t].input_type?e.append(await a(r[t])):"range-date"===r[t].input_type&&e.append(i(r[t]));return e}()),o.append(function(){document.createElement("div").classList.add("formControls");const e=create_generic_ele_submit_button();return e.classList.add("button-primary"),e.classList.add("formControls_submit"),e.classList.add("recordsFilter_submit"),e.type="button",e.innerHTML="apply filter",e.addEventListener("click",(()=>{!function(){let e=function(){let e=function(){let e=[];for(let i=0;i<r.length;i++){var n="",o=document.getElementById(t+r[i].id);null!==o?"single-text"===r[i].input_type?n=d(r[i].id,o.value):"select"===r[i].input_type&&(c=r[i].id,n="0"!==(l=o.value)?p(c,l):""):"range-date"===r[i].input_type&&(n=u(t,r[i].id)),""!==n&&e.push(n)}var c,l;return e}();if(e.length>0){let t=`?${e[0]}`;for(let n=1;n<e.length;n++)t+=`&${e[n]}`;return t}return""}();window.location.href=`${URL_RECORDS}${e}`}()})),e}()),n.append(o),n}(),c=(0,e.xs)(o);n.append(c),open_modal(c)}()}))}))})(),(()=>{"use strict";var e=n(371);document.addEventListener("DOMContentLoaded",(()=>{(function(){const t=document.querySelectorAll(".recordsTable_productsButton");null!==t&&t.forEach((t=>{t.addEventListener("click",(()=>{const n=(0,e.B3)(t.parentNode);(0,e.pZ)(n)}))}))})(),(0,e.nm)().forEach((t=>{(0,e.rV)(t)}))}))})(),document.addEventListener("DOMContentLoaded",(()=>{!function(){const e="scrollingShadowsWrapper",t="scrollingShadowsWrapper_scrollable",n="--opacityStart",r="--opacityEnd";let o=!1;function c(){const e=function(){const e=a();return null!==e&&e.scrollWidth>e.clientWidth}();e&&!o?function(){const e=a();null!==e&&(i(),e.addEventListener("scroll",(()=>{i()})),o=!0)}():!e&&o&&function(){l(0,0);const e=a();null!==e&&e.removeEventListener("scroll",(()=>{i()})),o=!1}()}function l(e,t){const o=s();null!==o&&(o.style.setProperty(n,e),o.style.setProperty(r,t))}function i(){const e=a(),t=function(e){const t=s();return null!==e&&null!==t?e.scrollWidth-t.offsetWidth:0}(e);if(0!==t){const n=e.scrollLeft/t;l(n,1-n)}}function s(){return document.querySelector(`.${e}`)}function a(){return document.querySelector(`.${t}`)}c(),window.addEventListener("resize",(()=>{c()}))}()})),(()=>{"use strict";var e=n(60);!function(){const t="todo-list-add";document.querySelectorAll("."+t).forEach((n=>{n.addEventListener("click",(()=>{!async function(n){let r=(0,e.YG)("PUT",{job_id:n.dataset.job_id}),o=await(0,e.Fl)(`${URL_TODO_MANAGEMENT}`,r);(0,e.au)(o,204)?function(e){const n="recordsTable_todoButton-on";e.classList.contains(t)&&(e.disabled=!0,e.classList.remove("recordsTable_todoButton-off"),e.classList.contains(n)||e.classList.add(n),e.querySelector(".recordsTable_todoButtonSpan").textContent="on todo list")}(n):alert((0,e.ml)(o))}(n)}))}))}()})()})();