(()=>{"use strict";const e="system-message-box",t="temp-warning-msg",n="http_code",r="location",o=new Set([200,201,204]),c=-1;function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n={method:e,headers:(r=function(e){let t=null;if(document.cookie&&""!==document.cookie){const n=document.cookie.split(";");for(let r=0;r<n.length;r++){const o=n[r].trim();if(o.substring(0,10)===e+"="){t=decodeURIComponent(o.substring(10));break}}}return t}("csrftoken"),o=new Headers,o.append("X-CSRFToken",r),o),credentials:"include"};var r,o;return null!=t&&(n.body=JSON.stringify(t)),n}async function i(e,t){let o=await fetch(e,t).catch((e=>{console.log("Error: ",e)}));return await async function(e){const t=e.headers.get("content-type");if(t&&-1!==t.indexOf("application/json"))var o=await e.json();else o={};return o[n]=e.status,o[r]=e.headers.get("Location"),o}(o)}function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=u(e);return n!==c&&(null===t?o.has(n):n===t)}function u(e){return"object"!=typeof e?c:n in e?"string"==typeof e[n]?parseInt(e[n]):e[n]:c}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n="error";if("string"==typeof e)return e;if("object"==typeof e){if(null!==t){let n=!0,r=u(e);if(r!==c&&(n=!function(e){return!!o.has(e)||(401==e||403==e||409==e)}(r)),n)return t}return function(e){if(a(e))return"Page refresh recommended.";switch(u(e)){case 400:return"Invalid inputs.";case 401:return"You must be logged in.";case 403:return r(e)?e[n]:"Request was forbidden by the server.";case 404:return"Requested information was not found.";case 409:return r(e)?e[n]:"Request clashed with information on server. (The server won.)";case 500:return"A server error has occurred.";default:return"Error: something went wrong."}}(e)}return null!==t?t:"Error: something went wrong.";function r(e){return"object"==typeof e&&n in e}}function d(){return(new Date).toLocaleString("en-GB")}function f(n){let r,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=document.querySelector(".status-controls"),s=document.querySelector("."+e);null==s&&(s=function(){let t=document.createElement("div");return t.classList.add(e),t}(),c.append(s)),"string"==typeof n?(o&&s.classList.add(t),r=n):"message"in n?r=n.message:l().responded_with_error_reason(n)?(s.classList.add(t),r=`Error: ${l(n)} @ ${d()}`):(s.classList.add(t),r="Something went wrong, try refreshing the page"),s.innerHTML=`${r} @ ${d()}`}document.addEventListener("DOMContentLoaded",(()=>{replace_btn=document.querySelector("#replace_document_btn"),null!=replace_btn&&replace_btn.addEventListener("click",(()=>{!async function(){const e=s("POST"),t=await i(`${URL_DOC_MAIN}?doc_id=${DOC_ID}&task=replace`,e);a(t,201)?window.location.href=t[r]:f(t)}()})),revert_btn=document.querySelector("#revert_document_btn"),null!=revert_btn&&revert_btn.addEventListener("click",(()=>{!async function(){const e=s("POST"),t=await i(`${URL_DOC_MAIN}?doc_id=${DOC_ID}&task=revert`,e);a(t,200)?window.location.href=t[r]:f(t)}()}))}))})();